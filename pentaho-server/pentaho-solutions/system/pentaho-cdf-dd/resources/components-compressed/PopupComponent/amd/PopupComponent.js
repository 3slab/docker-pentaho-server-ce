define("cde/components/PopupComponent/PopupComponent",["cdf/components/BaseComponent","cdf/lib/jquery","css!./PopupComponent"],function(t,e){var o=1;return t.extend({ph:void 0,arrow:void 0,content:void 0,cancel:void 0,$overlay:void 0,popupClass:void 0,popupOverlayClass:void 0,horizontalScroll:void 0,verticalScroll:void 0,update:function(){var t=this;this.content=e("#"+this.htmlObject).detach(),this.ph=this.ph?this.ph.empty():e("<div>").appendTo(e("body")),this.content.appendTo(this.ph),this.ph.hide(),this.ph.addClass("popupComponent"),this.popupClass&&this.ph.addClass(this.popupClass),this.cancel=e("<a>&nbsp;</a>"),this.cancel.addClass("close").click(function(){t.hide()}),this.cancel.appendTo(this.ph),this.arrow=e("<div class='arrow'>").appendTo(this.ph),this.content.removeClass("hidePopup")},clone:function(t,s,i){var h=this.base(t,s,i);return h.ph=this.ph.clone(),h.ph.insertAfter(this.ph),h.ph.hide(),h.ph.find("[id]").each(function(t,s){var h=e(s),p=h.attr("id");p&&p in i?h.attr("id",i[p]):h.attr("id",p+"_"+o++)}),h},popup:function(t,o){var s,i=t.offset(),h={top:"auto",bottom:"auto",left:"auto",right:"auto"},p=this.ph.outerHeight(),a=this.ph.outerWidth();o=o||this.gravity;var r=void 0===this.draggable||this.draggable;this.horizontalScroll&&e("#"+this.htmlObject).css("overflow-x","scroll"),this.verticalScroll&&e("#"+this.htmlObject).css("overflow-y","scroll");var n=void 0!==this.closeOnClickOutside&&this.closeOnClickOutside;this.arrow.css({top:"",left:"",bottom:"",right:""}),this.arrow.show(),this.ph.removeClass("north south east west");var l,c,d,f=e(document).width()-20,u=e(document).height()-20;switch(o){case"N":d=parseInt(t.css("padding-top").replace(/(.*)px/,"$1"),10),h.left=this.center(t.outerWidth(),a,i.left,20,f),c="ownerSVGElement"in t[0]?t.attr("height")?t.attr("height")-0:0:t.height(),s=i.left-h.left-this.ph.css("border-top-width").replace(/(.*)px/,"$1"),h.top=this.offset(c,p,i.top+d,12,20,u,"near"),this.arrow.css("left",this.center(t.outerWidth(),45,s,0,a)),this.ph.addClass(h.top<i.top?"north":"south");break;case"S":d=parseInt(t.css("padding-top").replace(/(.*)px/,"$1"),10),c="ownerSVGElement"in t[0]?t.attr("height")?t.attr("height")-0:0:t.height(),h.left=this.center(t.outerWidth(),a,i.left,20,f),h.top=this.offset(c,p,i.top+d,12,20,u,"far"),s=i.left-h.left-this.ph.css("border-top-width").replace(/(.*)px/,"$1"),this.arrow.css("left",this.center(t.outerWidth(),45,s,0,a)),this.ph.addClass(h.top<i.top?"north":"south");break;case"W":d=parseInt(t.css("padding-left").replace(/(.*)px/,"$1"),10),h.top=this.center(t.outerHeight(),p,i.top,20,u),l="ownerSVGElement"in t[0]?t.attr("width")?t.attr("width")-0:0:t.width(),h.left=this.offset(t.width(),a,i.left+d,12,20,f,"near"),s=i.top-h.top-this.ph.css("border-left-width").replace(/(.*)px/,"$1"),this.arrow.css("top",this.center(t.outerHeight(),45,s,0,p)),this.ph.addClass(h.left<i.left?"west":"east");break;case"E":d=parseInt(t.css("padding-left").replace(/(.*)px/,"$1"),10),h.top=this.center(t.outerHeight(),p,i.top,20,u),l="ownerSVGElement"in t[0]?t.attr("width")?t.attr("width")-0:0:t.width(),h.left=this.offset(l,a,i.left+d,12,20,f,"far"),s=i.top-h.top-this.ph.css("border-left-width").replace(/(.*)px/,"$1"),this.arrow.css("top",this.center(t.outerHeight(),45,s,0,p)),this.ph.addClass(h.left<i.left?"west":"east")}this.ph.css(h),this.ph.show();var v,g=this;v=function(t){27==t.which&&(g.ph.hide(),e(document).unbind("keydown",v))},e(document).keydown(v);var w=function(){g.arrow.hide()};this.ph.bind("drag",w),r&&this.ph.draggable({cancel:"#"+this.htmlObject});var m,b;this.ph.bind("touchstart",function(t){m=g.ph.offset(),b={left:t.originalEvent.touches[0].pageX,top:t.originalEvent.touches[0].pageY}}),this.ph.bind("touchmove",function(t){var e={top:m.top+t.originalEvent.touches[0].pageY-b.top,left:m.left+t.originalEvent.touches[0].pageX-b.left};g.ph.offset(e),g.arrow.hide(),t.preventDefault()}),n&&(this.$overlay||(this.$overlay=e('<div id="popupComponentOverlay"></div>'),this.popupOverlayClass&&this.$overlay.addClass(this.popupOverlayClass)),this.$overlay.appendTo("body").click(function(t){t.stopPropagation(),g.hide()})),e("body").addClass("draggable-popup-fix")},hide:function(){this.ph.hide(),this.$overlay&&(this.$overlay.unbind("click"),this.$overlay.detach()),e("body").removeClass("draggable-popup-fix")},center:function(t,e,o,s,i){var h=o+t/2-e/2;return h+e>i?i-e:h<s?s:h},offset:function(t,e,o,s,i,h,p){var a=o-e-s,r=o+t+s,n=a>i,l=r+e<h;return"near"==p?n||!l?a:r:"far"==p&&(l||!n)?r:a}})}),define("cde/components/PopupComponent",["cde/components/PopupComponent/PopupComponent"],function(t){return t});