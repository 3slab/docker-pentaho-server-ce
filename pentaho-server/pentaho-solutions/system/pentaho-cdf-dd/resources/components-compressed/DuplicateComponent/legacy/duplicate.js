var DuplicateComponent=BaseComponent.extend({update:function(){var e=this,a=$("#"+e.htmlObject).empty(),t=$("<a href='javascript:;'>Duplicate</a>");t.click(function(){e.duplicate()}),t.appendTo(a)},duplicate:function(e){var a=this;e=e||{},Dashboards.duplicateIndex||(Dashboards.duplicateIndex=0),Dashboards.duplicateIndex+=1;var t="_"+Dashboards.duplicateIndex,r={};$.each(a.parameters,function(a,n){var o=n+t;Dashboards.setBookmarkable(o,Dashboards.isBookmarkable(n)),Dashboards.setParameter(o,e[n]||Dashboards.getParameterValue(n)),r[n]=o});var n={};$.each(a.components,function(e,a){var r=a+t;n[a]=r});var o={};o[a.targetHtmlObject]=(a.targetHtmlObject+t).replace(/([^\\])\$/g,"$1\\$");var s=$("#"+a.targetHtmlObject).clone();s.attr("id",s.attr("id")+t),s.find("[id]").each(function(e,a){var r=$(a);r.attr("id",r.attr("id")+t)}),a.targetContainer?s.appendTo("#"+a.targetContainer):s.insertAfter("#"+a.targetHtmlObject);for(c in a.components){var d=a.components[c];d=RegExp("^render_").test(d)?d:"render_"+d;var i=Dashboards.getComponent(d);if(i){o[i.htmlObject]=(i.htmlObject+t).replace(/([^\\])\$/g,"$1\\$");var p=i.clone(r,n,o);p.name=p.name+t,window[p.name]=p,Dashboards.addComponents([p]),Dashboards.update(p)}}},clone:function(e,a,t){Dashboards.log("This function is deprecated. Please use targetComponent.clone(...), see BaseComponent in CDF (core.js) for more details.","warn");var r=this.base(e,a,t);return r.targetHtmlObject=t[r.targetHtmlObject],r.parameters&&(r.parameters=r.parameters.map(function(a){return a in e?e[a]:a})),r}});