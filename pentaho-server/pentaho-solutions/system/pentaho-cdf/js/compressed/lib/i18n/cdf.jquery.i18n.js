define(["../lib/jquery","amd!./jquery.i18n"],function(n){var e,a=n.i18n.properties;n.i18n.properties=function(n){n.language=r(n),e&&l(n)};var t=n.i18n.browserLang;n.i18n.browserLang=function(){return null};var r=function(a){null!=a.language&&""!==a.language||(a.language=t()),null==a.language&&(a.language="");var r,l=null!=a.encoding?a.encoding:"UTF-8",i=null!=a.path?a.path:"",s=i+a.name+"_supported_languages.properties";return n.ajax({type:"GET",url:s,async:!1,xhrFields:{withCredentials:!0},cache:a.cache,contentType:"text/plain;charset="+l,dataType:"text",success:function(n){r=u(n,a.language),e=!0},error:function(n){e=!1,404===n.status&&(r=a.language)}}),r},u=function(n,e){var a,t;e.length>=2&&(a=e.substring(0,2),t=a.toLowerCase());var r,u;if(e.length>=5&&(r=e.substring(0,5),u=r.toLowerCase()),null!=n){for(var l=null,i=n.split(/\n/),s=0;s<i.length;s++){var g=i[s],o=g.substr(0,g.indexOf("=")),c=o.toLowerCase();c===t&&null==l&&(l=o),c===u&&(l=o)}return null==l&&(l=""),l}},l=function(e){n.ajaxSetup({type:"GET",xhrFields:{withCredentials:!0}}),a(e),n.ajaxSetup({type:"POST",xhrFields:{withCredentials:!0}})};return n});