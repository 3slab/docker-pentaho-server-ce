SimileAjax.Graphics=new Object,SimileAjax.Graphics.pngIsTranslucent=!SimileAjax.Platform.browser.isIE||SimileAjax.Platform.browser.majorVersion>6,SimileAjax.Graphics._createTranslucentImage1=function(e,t){var i=document.createElement("img");return i.setAttribute("src",e),null!=t&&(i.style.verticalAlign=t),i},SimileAjax.Graphics._createTranslucentImage2=function(e,t){var i=document.createElement("img");return i.style.width="1px",i.style.height="1px",i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='image')",i.style.verticalAlign=null!=t?t:"middle",i},SimileAjax.Graphics.createTranslucentImage=SimileAjax.Graphics.pngIsTranslucent?SimileAjax.Graphics._createTranslucentImage1:SimileAjax.Graphics._createTranslucentImage2,SimileAjax.Graphics._createTranslucentImageHTML1=function(e,t){return'<img src="'+e+'"'+(null!=t?' style="vertical-align: '+t+';"':"")+" />"},SimileAjax.Graphics._createTranslucentImageHTML2=function(e,t){return"<img src='"+e+"' style=\"width: 1px; height: 1px; filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='image');"+(null!=t?" vertical-align: "+t+";":"")+'" />'},SimileAjax.Graphics.createTranslucentImageHTML=SimileAjax.Graphics.pngIsTranslucent?SimileAjax.Graphics._createTranslucentImageHTML1:SimileAjax.Graphics._createTranslucentImageHTML2,SimileAjax.Graphics.setOpacity=function(e,t){if(SimileAjax.Platform.browser.isIE)e.style.filter="progid:DXImageTransform.Microsoft.Alpha(Style=0,Opacity="+t+")";else{var i=(t/100).toString();e.style.opacity=i,e.style.MozOpacity=i}},SimileAjax.Graphics._bubbleMargins={top:33,bottom:42,left:33,right:40},SimileAjax.Graphics._arrowOffsets={top:0,bottom:9,left:1,right:8},SimileAjax.Graphics._bubblePadding=15,SimileAjax.Graphics._bubblePointOffset=6,SimileAjax.Graphics._halfArrowWidth=18,SimileAjax.Graphics.createBubbleForContentAndPoint=function(e,t,i,a,l){"number"!=typeof a&&(a=300),e.style.position="absolute",e.style.left="-5000px",e.style.top="0px",e.style.width=a+"px",document.body.appendChild(e),window.setTimeout(function(){var a=e.scrollWidth+10,r=e.scrollHeight+10,n=SimileAjax.Graphics.createBubbleForPoint(t,i,a,r,l);document.body.removeChild(e),e.style.position="static",e.style.left="",e.style.top="",e.style.width=a+"px",n.content.appendChild(e)},200)},SimileAjax.Graphics.createBubbleForPoint=function(e,t,i,a,l){var r=function(){n._closed||(document.body.removeChild(n._div),n._doc=null,n._div=null,n._content=null,n._closed=!0)},n={_closed:!1},o=function(){return"number"==typeof window.innerHeight?{w:window.innerWidth,h:window.innerHeight}:document.documentElement&&document.documentElement.clientHeight?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:document.body&&document.body.clientHeight?{w:document.body.clientWidth,h:document.body.clientHeight}:void 0}(),s=o.w,p=o.h,m=SimileAjax.Graphics._bubbleMargins;i=parseInt(i,10),a=parseInt(a,10);var c=m.left+i+m.right,h=m.top+a+m.bottom,d=SimileAjax.Graphics.pngIsTranslucent,u=SimileAjax.urlPrefix,g=function(e,t,i,a){e.style.position="absolute",e.style.width=i+"px",e.style.height=a+"px",d?e.style.background="url("+t+")":e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='crop')"},f=document.createElement("div");f.style.width=c+"px",f.style.height=h+"px",f.style.position="absolute",f.style.zIndex=1e3;var b=SimileAjax.WindowManager.pushLayer(r,!0,f);n._div=f,n.close=function(){SimileAjax.WindowManager.popLayer(b)};var x=document.createElement("div");x.style.width="100%",x.style.height="100%",x.style.position="relative",f.appendChild(x);var y=function(e,t,i,a,l){var r=document.createElement("div");r.style.left=t+"px",r.style.top=i+"px",g(r,e,a,l),x.appendChild(r)};y(u+"images/bubble-top-left.png",0,0,m.left,m.top),y(u+"images/bubble-top.png",m.left,0,i,m.top),y(u+"images/bubble-top-right.png",m.left+i,0,m.right,m.top),y(u+"images/bubble-left.png",0,m.top,m.left,a),y(u+"images/bubble-right.png",m.left+i,m.top,m.right,a),y(u+"images/bubble-bottom-left.png",0,m.top+a,m.left,m.bottom),y(u+"images/bubble-bottom.png",m.left,m.top+a,i,m.bottom),y(u+"images/bubble-bottom-right.png",m.left+i,m.top+a,m.right,m.bottom);var A=document.createElement("div");A.style.left=c-m.right+SimileAjax.Graphics._bubblePadding-16-2+"px",A.style.top=m.top-SimileAjax.Graphics._bubblePadding+1+"px",A.style.cursor="pointer",g(A,u+"images/close-button.png",16,16),SimileAjax.WindowManager.registerEventWithObject(A,"click",n,"close"),x.appendChild(A);var S=document.createElement("div");return S.style.position="absolute",S.style.left=m.left+"px",S.style.top=m.top+"px",S.style.width=i+"px",S.style.height=a+"px",S.style.overflow="auto",S.style.background="white",x.appendChild(S),n.content=S,function(){if(e-SimileAjax.Graphics._halfArrowWidth-SimileAjax.Graphics._bubblePadding>0&&e+SimileAjax.Graphics._halfArrowWidth+SimileAjax.Graphics._bubblePadding<s){var r=e-Math.round(i/2)-m.left;if(r=e<s/2?Math.max(r,-(m.left-SimileAjax.Graphics._bubblePadding)):Math.min(r,s+(m.right-SimileAjax.Graphics._bubblePadding)-c),l&&"top"==l||!l&&t-SimileAjax.Graphics._bubblePointOffset-h>0){var n=document.createElement("div");return n.style.left=e-SimileAjax.Graphics._halfArrowWidth-r+"px",n.style.top=m.top+a+"px",g(n,u+"images/bubble-bottom-arrow.png",37,m.bottom),x.appendChild(n),f.style.left=r+"px",void(f.style.top=t-SimileAjax.Graphics._bubblePointOffset-h+SimileAjax.Graphics._arrowOffsets.bottom+"px")}if(l&&"bottom"==l||!l&&t+SimileAjax.Graphics._bubblePointOffset+h<p){var n=document.createElement("div");return n.style.left=e-SimileAjax.Graphics._halfArrowWidth-r+"px",n.style.top="0px",g(n,u+"images/bubble-top-arrow.png",37,m.top),x.appendChild(n),f.style.left=r+"px",void(f.style.top=t+SimileAjax.Graphics._bubblePointOffset-SimileAjax.Graphics._arrowOffsets.top+"px")}}var o=t-Math.round(a/2)-m.top;if(o=t<p/2?Math.max(o,-(m.top-SimileAjax.Graphics._bubblePadding)):Math.min(o,p+(m.bottom-SimileAjax.Graphics._bubblePadding)-h),l&&"left"==l||!l&&e-SimileAjax.Graphics._bubblePointOffset-c>0){var n=document.createElement("div");n.style.left=m.left+i+"px",n.style.top=t-SimileAjax.Graphics._halfArrowWidth-o+"px",g(n,u+"images/bubble-right-arrow.png",m.right,37),x.appendChild(n),f.style.left=e-SimileAjax.Graphics._bubblePointOffset-c+SimileAjax.Graphics._arrowOffsets.right+"px",f.style.top=o+"px"}else if(l&&"right"==l||!l&&e-SimileAjax.Graphics._bubblePointOffset-c<s){var n=document.createElement("div");n.style.left="0px",n.style.top=t-SimileAjax.Graphics._halfArrowWidth-o+"px",g(n,u+"images/bubble-left-arrow.png",m.left,37),x.appendChild(n),f.style.left=e+SimileAjax.Graphics._bubblePointOffset-SimileAjax.Graphics._arrowOffsets.left+"px",f.style.top=o+"px"}}(),document.body.appendChild(f),n},SimileAjax.Graphics.createMessageBubble=function(e){var t=e.createElement("div");if(SimileAjax.Graphics.pngIsTranslucent){var i=e.createElement("div");i.style.height="33px",i.style.background="url("+SimileAjax.urlPrefix+"images/message-top-left.png) top left no-repeat",i.style.paddingLeft="44px",t.appendChild(i);var a=e.createElement("div");a.style.height="33px",a.style.background="url("+SimileAjax.urlPrefix+"images/message-top-right.png) top right no-repeat",i.appendChild(a);var l=e.createElement("div");l.style.background="url("+SimileAjax.urlPrefix+"images/message-left.png) top left repeat-y",l.style.paddingLeft="44px",t.appendChild(l);var r=e.createElement("div");r.style.background="url("+SimileAjax.urlPrefix+"images/message-right.png) top right repeat-y",r.style.paddingRight="44px",l.appendChild(r);var n=e.createElement("div");r.appendChild(n);var o=e.createElement("div");o.style.height="55px",o.style.background="url("+SimileAjax.urlPrefix+"images/message-bottom-left.png) bottom left no-repeat",o.style.paddingLeft="44px",t.appendChild(o);var s=e.createElement("div");s.style.height="55px",s.style.background="url("+SimileAjax.urlPrefix+"images/message-bottom-right.png) bottom right no-repeat",o.appendChild(s)}else{t.style.border="2px solid #7777AA",t.style.padding="20px",t.style.background="white",SimileAjax.Graphics.setOpacity(t,90);var n=e.createElement("div");t.appendChild(n)}return{containerDiv:t,contentDiv:n}},SimileAjax.Graphics.createAnimation=function(e,t,i,a,l){return new SimileAjax.Graphics._Animation(e,t,i,a,l)},SimileAjax.Graphics._Animation=function(e,t,i,a,l){this.f=e,this.cont="function"==typeof l?l:function(){},this.from=t,this.to=i,this.current=t,this.duration=a,this.start=(new Date).getTime(),this.timePassed=0},SimileAjax.Graphics._Animation.prototype.run=function(){var e=this;window.setTimeout(function(){e.step()},50)},SimileAjax.Graphics._Animation.prototype.step=function(){this.timePassed+=50;var e=this.timePassed/this.duration,t=-Math.cos(e*Math.PI)/2+.5,i=t*(this.to-this.from)+this.from;try{this.f(i,i-this.current)}catch(e){}this.current=i,this.timePassed<this.duration?this.run():(this.f(this.to,0),this.cont())},SimileAjax.Graphics.createStructuredDataCopyButton=function(e,t,i,a){var l=document.createElement("div");l.style.position="relative",l.style.display="inline",l.style.width=t+"px",l.style.height=i+"px",l.style.overflow="hidden",l.style.margin="2px",SimileAjax.Graphics.pngIsTranslucent?l.style.background="url("+e+") no-repeat":l.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='image')";var r;r=SimileAjax.Platform.browser.isIE?"filter:alpha(opacity=0)":"opacity: 0",l.innerHTML="<textarea rows='1' autocomplete='off' value='none' style='"+r+"' />";var n=l.firstChild;return n.style.width=t+"px",n.style.height=i+"px",n.onmousedown=function(e){e=e||(event||null),2==e.button&&(n.value=a(),n.select())},l},SimileAjax.Graphics.getFontRenderingContext=function(e,t){return new SimileAjax.Graphics._FontRenderingContext(e,t)},SimileAjax.Graphics._FontRenderingContext=function(e,t){this._elmt=e,this._elmt.style.visibility="hidden","string"==typeof t?this._elmt.style.width=t:"number"==typeof t&&(this._elmt.style.width=t+"px")},SimileAjax.Graphics._FontRenderingContext.prototype.dispose=function(){this._elmt=null},SimileAjax.Graphics._FontRenderingContext.prototype.update=function(){this._elmt.innerHTML="A",this._lineHeight=this._elmt.offsetHeight},SimileAjax.Graphics._FontRenderingContext.prototype.computeSize=function(e){return this._elmt.innerHTML=e,{width:this._elmt.offsetWidth,height:this._elmt.offsetHeight}},SimileAjax.Graphics._FontRenderingContext.prototype.getLineHeight=function(){return this._lineHeight};