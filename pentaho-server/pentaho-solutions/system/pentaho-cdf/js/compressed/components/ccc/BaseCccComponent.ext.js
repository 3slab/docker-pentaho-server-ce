define(["require","pentaho/module/instancesOf!pentaho/visual/color/Palette","amd!../../lib/underscore","../../lib/jquery","pentaho/shim/es6-promise"],function(e,t,a,r,n){function i(e,t){var r=u.exec(e);if(!r)return null;var n=r[1];if(a.contains(s,n))return null;switch(n){case"MetricDot":n="Bubble";break;case"MetricLine":n="Scatter";break;case"NormalizedBar":n="BarNormalized";break;case"Dot":case"StackedDot":n="PointAbstract";break;case"StackedLine":n="Line";break;case"StackedArea":n="AreaStacked"}if(null!=t&&!a.contains(d,n)){t.valuesNormalized&&!a.contains(f,n)&&(n+="Normalized"),t.stacked&&!a.contains(k,n)&&(n+="Stacked");"horizontal"!==(t.orientation||"").toLowerCase()||a.contains(m,n)||(n+="Horizontal")}return"pentaho/ccc/visual/"+n}function o(t){return new n(function(a,n){e([t],function(e){var t=r.extend({},e.prototype.extensionEffective);a(t)},n)})}function c(t){var a;return a=null==t?l:e(t),a.colors.toArray().map(function(e){return e.value})}var l=function(){var e=t.filter(function(e){return"nominal"===e.level});return e.length>0?e[0]:null}();t=null;var u=/^(.*)Chart$/,s=["Bullet"],d=["Waterfall","Treemap","Boxplot","HeatGrid","Line","Scatter","Pie","PointAbstract","Sunburst"],f=["BarNormalized","Area","AreaStacked"],k=["BarNormalized","AreaStacked"],m=["Area","AreaStacked"];return{getMatchingVizViewId:i,getExtensionsPromise:o,getColors:c}});