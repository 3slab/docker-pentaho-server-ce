define(["./BaseComponent","./AnalyzerComponent.ext","../Logger","../lib/moment","../lib/jquery","amd!../lib/underscore"],function(t,e,i,s,a,r){return t.extend({update:function(){this.clear();var t=this._getApiUrl(),e=this.generateIframe(t);a("#"+this.htmlObject).html(e)},getOptions:function(){var t={command:null!=this.command?this.command:"open",frameless:null!=this.frameless&&this.frameless};return this.isEditMode()&&(t.showFieldList=null!=this.showFieldList&&this.showFieldList,t.showRepositoryButtons=null!=this.showRepositoryButtons&&this.showRepositoryButtons),this.dateFormats=this.dateFormats||{},this.parameters.forEach(function(e){var i=this._extractParameter(e),a=i.value,r=this.dateFormats[i.name];if(null!=r){var n=s(a).format(r);"Invalid date"!==n&&(a=n)}t[i.name]=a},this),t.ts=(new Date).getTime(),t},isEditMode:function(){return null!=this.viewOnly?!this.viewOnly||this.editMode:this.editMode},generateIframe:function(t){return"<iframe id ='iframe_"+this.htmlObject+"' src='"+t+"' style='height:100%;width:100%;border:0' frameborder='0'/>"},_getApiUrl:function(){var t=this.isEditMode()?"editor":"viewer",i=this.getOptions(),s={solution:this.solution,path:this.path,action:this.action};return e.getAnalyzer(s,t,i)},_extractParameter:function(t){var e,s=t[0],a=t[1];try{e=this.dashboard.getParameterValue(a)}catch(t){var n=!r.isObject(a)||r.isFunction(a),o="extractParameter detected static parameter "+s+"="+(n?a:JSON.stringify(a))+". The parameter will be used as value instead its value obtained from getParameterValue";i.log(o),e=a}return void 0===e&&(e=a),r.isFunction(e)&&(e=e()),{name:s,value:e}}})});