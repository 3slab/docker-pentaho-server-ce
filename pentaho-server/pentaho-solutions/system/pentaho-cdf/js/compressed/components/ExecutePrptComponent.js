define(["./PrptComponent.ext","../lib/jquery","./PrptComponent","amd!../lib/jquery.fancybox"],function(t,e,n){return n.extend({visible:!1,update:function(){var t=this,n=t.placeholder();n.length>0&&(e.inArray(n[0].tagName.toUpperCase(),["SPAN","DIV"])>-1&&(n=e("<button/>").appendTo(n.empty()),"DIV"==n[0].tagName&&n.wrap("<span/>"),void 0!=this.label&&n.text(this.label),n.button()),n.unbind("click"),n.bind("click",function(){(void 0===t.preChange||t.preChange())&&t.executePrptComponent(),void 0!==t.postChange&&t.postChange()}))},executePrptComponent:function(){var n=this.getOptions(),o={};n.solution&&e.extend(o,{solution:n.solution}),n.path&&e.extend(o,{path:n.path}),n.action&&e.extend(o,{action:n.action}),delete n.solution,delete n.path,delete n.action,e.extend(n,{ts:(new Date).getTime()}),e.fancybox.open({src:t.getReport(o,"viewer",n),type:"iframe",baseClass:"cdf-fancybox cdf-fancybox-iframe",btnTpl:{smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="close"></button>'}},{toolbar:!1,smallBtn:!0,iframe:{preload:!1,css:{width:e(window).width(),height:e(window).height()-50,"max-width":"100%","max-height":"100%"}}})}})});