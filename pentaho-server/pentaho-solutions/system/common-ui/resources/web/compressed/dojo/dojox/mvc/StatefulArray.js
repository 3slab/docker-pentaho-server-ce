define(["dojo/_base/lang","dojo/Stateful"],function(t,e){function n(t){return t._watchElementCallbacks&&t._watchElementCallbacks(),t}var i=function(s){var r=t._toArray(s||[]),h=i;return r.constructor=h,t.mixin(r,{pop:function(){return this.splice(this.get("length")-1,1)[0]},push:function(){return this.splice.apply(this,[this.get("length"),0].concat(t._toArray(arguments))),this.get("length")},reverse:function(){return n([].reverse.apply(this,t._toArray(arguments)))},shift:function(){return this.splice(0,1)[0]},sort:function(){return n([].sort.apply(this,t._toArray(arguments)))},splice:function(e,n){var i=this.get("length");e+=e<0?i:0;var s=Math.min(e,i),r=this.slice(e,e+n),h=t._toArray(arguments).slice(2);[].splice.apply(this,[e,n].concat(new Array(h.length)));for(var a=0;a<h.length;a++)this[s+a]=h[a];return this._watchElementCallbacks&&this._watchElementCallbacks(e,r,h),this._watchCallbacks&&this._watchCallbacks("length",i,i-r.length+h.length),r},unshift:function(){return this.splice.apply(this,[0,0].concat(t._toArray(arguments))),this.get("length")},concat:function(t){return new i([].concat.apply(this,arguments))},join:function(t){for(var e=[],n=this.get("length"),i=0;i<n;i++)e.push(this.get(i));return e.join(t)},slice:function(t,e){var n=this.get("length");t+=t<0?n:0,e=(void 0===e?n:e)+(e<0?n:0);for(var s=[],r=t||0;r<Math.min(e,this.get("length"));r++)s.push(this.get(r));return new i(s)},watchElements:function(t){var e=this._watchElementCallbacks,n=this;e||(e=this._watchElementCallbacks=function(t,i,s){for(var r=[].concat(e.list),h=0;h<r.length;h++)r[h].call(n,t,i,s)},e.list=[]),e.list.push(t);var i={};return i.unwatch=i.remove=function(){for(var n=e.list,i=0;i<n.length;i++)if(n[i]==t){n.splice(i,1);break}},i}},e.prototype,{set:function(t,n){if("length"==t){var i=this.get("length");return i<n?this.splice.apply(this,[i,0].concat(new Array(n-i))):n<i&&this.splice.apply(this,[n,i-n]),this}var s=this.length;return e.prototype.set.call(this,t,n),s!=this.length&&e.prototype.set.call(this,"length",this.length),this},isInstanceOf:function(t){return e.prototype.isInstanceOf.apply(this,arguments)||t==i}})};return i._meta={bases:[e]},t.setObject("dojox.mvc.StatefulArray",i)});