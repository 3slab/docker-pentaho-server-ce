/*!
 * Copyright 2010 - 2017 Hitachi Vantara.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

define(["dojo/_base/declare","dojo/data/ItemFileReadStore","dijit/registry","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/ContentPane","dijit/layout/BorderContainer","dijit/form/HorizontalSlider","dijit/form/TextBox","dijit/form/ComboBox","dijit/form/Select","dijit/form/CheckBox","dijit/TitlePane","dojo/on","dojo/query","dojo/_base/array","dojo/_base/lang","dojo/html","dojo/dom-construct","dojo/string","dojo/dom-class","dojo/dnd/Target","dojo/dnd/Source","dojo/dnd/Manager","dojo/Evented","dojo/topic","dojo/dom","dojo/dom-geometry","dojo/aspect","pentaho/common/Messages","pentaho/common/propertiesPanel/Configuration"],function(e,t,i,o,n,s,r,d,h,a,l,c,u,p,m,g,f,v,_,I,y,D,b,N,C,x,w,B,P,E,G,H){function k(e){return e+ ++T}var T=0,j=e("pentaho.common.propertiesPanel.Panel",[r,x],{captionTemplate:"<div class='caption'><span class='caption-text'>${ui.caption:i18n}</span><i class='captionIcon'></i></div>",seperatorTemplate:"<div class='propPanel-seperator'></div>",propUIs:null,groups:null,previousGroupsOpenState:null,gutters:!1,baseClass:"pentahoPropertiesPanel",minHeightDeviation:0,_gemUIByGemId:null,constructor:function(e){this.configuration=e,this._gemUIByGemId={}},postCreate:function(){f.forEach(this.configuration.items,v.hitch(this,"initializeItem")),this.inherited(arguments)},resize:function(){this.minHeightDeviation=0,this.inherited(arguments)},initializeItem:function(e){if(!e.ui.hidden){var t=j.registeredTypes[e.ui.type];if(!t)throw"No Properties Panel UI implementation found for "+e.ui.type;var i;i=t.create?t.create({model:e,propPanel:this}):new t({model:e,propPanel:this});var o=this.domNode,n=e.ui.group;if(n){var s=this._getOrCreateGroup(n);s&&(o=s.content)}if(e.ui.seperator&&o.appendChild(I.toDom(this.seperatorTemplate)),e.ui.caption){var r=I.toDom(y.substitute(this.captionTemplate,e,null,{i18n:function(e,t){var i=G.getString(e,e);return i.length&&":"===i[i.length-1]?i.slice(0,-1):i}})),d=g("i",r);d&&null!=d&&d.length>0&&(d=d[d.length-1],e.ui.captionIcon?D.add(d,e.ui.captionIcon):d.style.display="none"),o.appendChild(r)}this.setupEventHandling(i),i instanceof S&&this.registerGemUI(i),this.propUIs.push(i),this.own(m(i,"UIEvent",v.hitch(this,"onUIEvent"))),D.add(i.domNode,"propPanelItem"),o.appendChild(i.domNode),this.resize()}},_getOrCreateGroup:function(e){var t=this.groups[e];if(!t){var i=this.configuration.groups[e];i&&(t=this._createGroup(e,i))}return t},_createGroup:function(e,t){var i=new p({title:G.getString(t.title,t.title),content:document.createElement("div"),region:"top",splitter:!1});return null!==this.previousGroupsOpenState&&void 0!==this.previousGroupsOpenState[e]&&i.open&&!1===this.previousGroupsOpenState[e].open&&i.toggle(),E.after(i,"resize",v.hitch(this,function(){this._resizeGroup(i)})),E.after(i._wipeOut,"onEnd",v.hitch(this,"resize")),E.after(i._wipeIn,"onEnd",v.hitch(this,"resize")),this.domNode.appendChild(i.domNode),this.groups[e]=i},_resizeGroup:function(e){var t=(P.position(this.domNode.children[this.domNode.children.length-1]),0),i=0,o=0,n=0;for(var s in this.groups){t++;var r=this.groups[s],d=P.position(r.titleBarNode).h;i+=r.open?d+r.hideNode.scrollHeight:0,r.open?n+=r.usingMinHeight?r.heightAdjustment:0:n+=d}f.forEach(this.domNode.children,function(e){e.className.match(/dijitTitlePane/)||(o+=P.position(e).h)});var h=(P.position(this.domNode).h,P.position(this.domNode).h-o-n),a=P.position(e.titleBarNode),d=a.h,l=a.w;if(e.open){var c=d+e.hideNode.scrollHeight,u=c/i*h;u>c?(e.hideNode.style.overflow="hidden",e.wipeNode.style.width=l+"px"):(e.hideNode.style.overflow="auto",e.wipeNode.style.width="");u<2.2*d?(e.usingMinHeight=!0,e.heightAdjustment=2.2*d-u,u=2.2*d):e.usingMinHeight=!1,isNaN(u)||(e.domNode.style.height=u+"px"),P.position(e.domNode).h>0&&(e.hideNode.style.height=Math.min(P.position(e.domNode).h-d,e.hideNode.scrollHeight)+"px")}else isNaN(d)||(e.domNode.style.height=d+"px"),e.usingMinHeight=!1;e.domNode.style.width=""},onUIEvent:function(e,t){m.emit(this,e,t)},registerGemUI:function(e){this._gemUIByGemId[e.model.id]=e},unregisterGemUI:function(e){delete this._gemUIByGemId[e.model.id]},getGemUIById:function(e){if(e){var t=/^gem_(.*?)(:?_\d+)?$/.exec(e);return t&&(e=t[1]),this._gemUIByGemId[e]}},setupEventHandling:function(e){this.own(m(e,"contextMenu",function(t){this.onUIEvent("onContextMenu",{item:e,args:[e,t]})})),this.own(m(e,"click",function(t){this.onUIEvent("onClick",{item:e,args:[e,t]})})),this.own(m(e,"dblclick",function(t){this.onUIEvent("onDblClick",{item:e,args:[e,t]})}))},setConfiguration:function(e){this._setConfiguration(new H(e))},_setConfiguration:function(e){if(this.propUIs&&this.propUIs.length&&this._destroyChildrenDeferred(),this.groups){this.previousGroupsOpenState={};for(var t in this.groups)this.groups.hasOwnProperty(t)&&(this.previousGroupsOpenState[t]={},this.previousGroupsOpenState[t].open=this.groups[t].open||!1)}for(this.propUIs=[],this.groups={},this._gemUIByGemId={};null!==this.domNode.firstChild;)this.domNode.removeChild(this.domNode.firstChild);this.configuration=e,this.postCreate()},_destroyChildrenDeferred:function(){function e(){f.forEach(t,function(e){e.destroyRecursive()})}var t=this.getChildren();window.setTimeout(e,0)},reload:function(){this._setConfiguration(this.configuration)},set:function(e,t,i){f.forEach(this.propUIs,function(o){o.model.id==t&&o.model.set(e,i)})}});j.registeredTypes={};var A=e([],{constructor:function(e){this.model=e.model,this.propPanel=e.propPanel,this._watchHandle=this.model.watch(v.hitch(this,function(e,t,i){switch(e){case"value":case"default":this._destroyed||this.set(e,i)}}))},onUIEvent:function(e,t){},destroy:function(){this.inherited(arguments),this.model=this.propPanel=null,this._watchHandle&&(this._watchHandle.remove(),this._watchHandle=null)}}),U=e([N],{constructor:function(e){this.dropIndicator=document.createElement("div"),this.dropIndicator.className="indicator",this.dropIndicator.id="propertyPanelIndicator",this.dropIndicator.style.display="none";var t=document.createElement("div");t.className="indicatorLine",this.dropIndicator.appendChild(t),this.node.parentNode.appendChild(this.dropIndicator)},destroy:function(){this.inherited(arguments),null!==this.__autoHideDropIndicatorCallback&&this.__autoHideDropIndicatorCallback(),this.gemBar=this.dropIndicator=this.gemUIbeingInserted=null},onDropAtEnd:function(e,t,i){var o=this.__getEndDropInfo();return this.onDrop(e,t,i,o)},onDrop:function(e,t,i,o){if(this.dropZone2Zone=!1,!t||0===t.length)return!1;var n=t[0];if(null!=o&&(this.current=o.anchor,this.before=o.before),!this.checkAcceptanceAtDropInfo(this,t,!0))return!1;var s,r=this.gemBar.propPanel.getGemUIById(n.id);r?(s=r.model,r.gemBar===this.gemBar||(this.dropZone2Zone=!0,r.gemBar.remove(r,!0),r.model.previousGemBar=r.gemBar.model,r.gemBar=this.gemBar)):(s=this.createGemFromNode(n),r=this.createGemUI(s,n),t[0]=r.domNode),this.gemUIbeingInserted=r;var d=t[0].id;t[0].id=n.id,this.inherited(arguments),t[0].id=d,this.sync(),e.sync();var h=e.postDrop||s.postDrop;return this._executePostDrop(n.getAttribute("formula"),h),!0},_onDrop:function(e,t,i,o,n,s,r,d){var h=this.gemBar,a=this.node;this.gemBar=o,this.node=r;var l=this.createGemByFormula(e,i);this.gemUIbeingInserted=this.createGembarUIFromGembar(l,o,t),this.insertNodes(null,null,n,s,!0),this.gemBar=h,this.node=a,this._executePostDrop(e,d)},_executePostDrop:function(e,t){t&&t.f.call(t.scope,e,this.gemBar.id)},createGemFromNode:function(e){return this.gemBar.model.createGemFromNode(e)},createGemByFormula:function(e,t){return this.gemBar.model.createGemByFormula(e,t)},createGembarUIFromGembar:function(e,t){var i=j.registeredTypes.gem,o={model:e,gemBar:this.gemBar,dndType:t};return i.create?i.create(o):new i(o)},createGemUI:function(e,t){return this.gemBar.createGemUI(e,t)},onDraggingOver:function(){this.inherited(arguments),this.__previousDropInfo=void 0,this.updateDropIndicatorAtDropInfo()},onMouseMove:function(){this.inherited(arguments),this.__isDraggingAndEnabled()&&this.updateDropIndicatorAtDropInfo()},onDraggingOut:function(){this.inherited(arguments),this.__autoHideDropIndicatorCallback?this.__autoHideDropIndicatorCallback():this._hideDropIndicator()},updateDropIndicatorAtEnd:function(){var e=this.__getEndDropInfo();this.updateDropIndicatorAtDropInfo(e)},updateDropIndicatorAtDropInfo:function(e){var t=this.__previousDropInfo;if(void 0===e&&(e=this.__getCurrentDropInfo()),null===e||this.__shouldShowDropIndicator(e)||(e=null),void 0===t||!this.__areEqualDropInfos(e,t)){this.__previousDropInfo=e;null!==e&&this.checkAcceptanceAtDropInfo(this,C.manager().nodes,void 0,e)?(this.__placeIndicator(e.anchor,e.before),this.__hideDropIndicatorOnDndEnd()):this.__autoHideDropIndicatorCallback?this.__autoHideDropIndicatorCallback():this._hideDropIndicator()}},__previousDropInfo:void 0,__autoHideDropIndicatorCallback:null,__hideDropIndicatorOnDndEnd:function(){if(null===this.__autoHideDropIndicatorCallback){var e,t,i=v.hitch(this,function(){this.__previousDropInfo=void 0,this.__autoHideDropIndicatorCallback=null,this._hideDropIndicator(),e.remove(),t.remove()});e=w.subscribe("/dnd/cancel",i),t=w.subscribe("/dnd/drop",i),this.__autoHideDropIndicatorCallback=i}},__shouldShowDropIndicator:function(e){var t=e.anchor;if(null==t)return!1;var i=this.node.children,o=e.before,n=this.__getChildIndex(t),s=C.manager().nodes[0];return t!==s&&(!(!o&&n+1<i.length&&i[n+1]===s)&&!(o&&n>0&&i[n-1]===s))},_showDropIndicator:function(){var e=this.__getCurrentDropInfo();return this.__shouldShowDropIndicator(e)?(this.__placeIndicator(e.anchor,e.before),e):(this._hideDropIndicator(),null)},_hideDropIndicator:function(){this.dropIndicator&&(this.dropIndicator.style.display="none")},__placeIndicator:function(e,t){var i,o=this.node.children,n=P.position(this.node,!0),s=this.dropIndicator.style;if(null==e)o.length?(e=o[o.length-1],i=P.position(e,!0),s.left=i.x-7-(n.x-5)+"px",i=P.position(o[0]),s.top=(t?i.y- -5:e.y+e.h+-5)-(n.y-5)+"px",s.width=i.w+"px"):(s.left="-2px",s.top=n.h+5+"px",s.width=n.w+"px");else{var r=this.__getChildIndex(e),d=o.length;!t&&r<d-1&&(t=!0,r++,e=o[r]),i=P.position(e,!0);var h=P.getPadExtents(this.dropIndicator.parentNode),a=i.x-n.x;s.left=a-2+"px",s.width=i.w+"px",this.dropIndicator.style.display="";var l=P.position(this.dropIndicator,!0);this.dropIndicator.style.display="none";var c,u=i.y-n.y;if(t)if(0===r)c=u;else{var p=P.position(o[r-1],!0),m=p.y-n.y,g=m+p.h;c=(u+g)/2}else c=u+i.h;var f=h.t-l.h/2;s.top=f+c+"px"}this.dropIndicator.style.display=""},_getChildByEvent:function(e){var t=this.inherited(arguments);if(null===t){var i=this.__getIndexOfChildClosestToMouse(e);i>=0&&(t=this.node.children[i])}return t},__calculateInsertPosition:function(e,t){var i;return i=null==e||(i=this.__getChildIndex(e))<0?this.node.children.length:t?i:i+1},insertNodes:function(e,t,i,o,n){var s=this.__calculateInsertPosition(o,i);this.gemBar.insertAt(this.gemUIbeingInserted,s,this.dropZone2Zone),n||this.inherited(arguments),this.gemBar.propPanel.resize()},checkAcceptance:function(e,t,i){return this.gemBar.checkAcceptance(e,t,i,null)},checkAcceptanceAtDropInfo:function(e,t,i,o){null==o&&(o=this.__getCurrentDropInfo());var n=this.__calculateInsertPosition(o.anchor,o.before);return this.gemBar.checkAcceptance(e,t,i,n)},checkAcceptanceAtEnd:function(e,t,i){var o=this.__getEndDropInfo();return this.checkAcceptanceAtDropInfo(e,t,i,o)},__getCurrentDropInfo:function(){return{anchor:this.current,before:this.before}},__getEndDropInfo:function(){var e=this.node.children;return{anchor:e.length>0?e[e.length-1]:null,before:!1}},__areEqualDropInfos:function(e,t){return e===t||null!==e&&null!==t&&e.before===t.before&&e.anchor===t.anchor},__getChildIndex:function(e){return Array.prototype.indexOf.call(this.node.children,e)},__getIndexOfChildClosestToMouse:function(e){for(var t=e.clientX,i=e.clientY,o=-1,n=1/0,s=this.node.children,r=0;s&&r<s.length;++r){var d=P.position(s[r],!0),h=d.x+d.w,a=d.x,l=d.y,c=d.y+d.h;if(t>=a-6&&t<=h+6&&i>=l-6&&i<=c+6){if(t>=a&&t<=h&&i>=l&&i<=c)return r;var u=l+d.h/2,p=Math.abs(i-u);(o<0||p<n)&&(o=r,n=p)}}return o},__isDraggingAndEnabled:function(){return this.isDragging&&"Disabled"!==this.targetState}}),M=e([b],{constructor:function(e,t){this.dropZone=t.dropZone},onDraggingOver:function(){this.inherited(arguments),this.dropZone.updateDropIndicatorAtEnd()},onDraggingOut:function(){this.inherited(arguments),this.dropZone.updateDropIndicatorAtDropInfo(null)},onDrop:function(e,t,i){return this.dropZone.onDropAtEnd(e,t,i)},checkAcceptance:function(e,t,i){return this.dropZone.checkAcceptanceAtEnd(e,t,i)},destroy:function(){this.inherited(arguments),this.dropZone=null}}),O=e([o,n,s,x,A],{className:"propPanel_gemBar",gemLimit:-1,templateString:"<div class='${className}' data-dojo-type='dijit.layout.BorderContainer' data-dojo-props='gutters:false'><div class='gemDropZone' data-dojo-props='region:center'></div><div class='gemPlaceholder'><span>${placeholderText}</span></div></div>",gems:null,accept:["gem"],showPlaceholder:!0,placeholderText:"Drop Level Here",constructor:function(e){this.id=k(this.model.id+"_ui"),this.showPlaceholder=this.model.ui.showPlaceholder,this.model.ui.placeholderText&&(this.placeholderText=this.model.ui.placeholderText)},postCreate:function(){this.gems=[];var e=this.model.dataType;e&&D.add(this.domNode,e),this.dropZoneNode=this.domNode.firstChild,this.dropZone=new U(this.dropZoneNode,{accept:this.model.ui.dndType,gemBar:this});var t=0===this.model.gems.length,i=this.showPlaceholder;if(i){!this.model.allowMultiple&&!t&&(i=!1)}this.placeholder=g(".gemPlaceholder",this.domNode)[0],this.placeholder.style.display=i?"":"none",this.model.required&&t&&D.add(this.placeholder,"reqiured"),i&&(this._placeHolderSource=new M(this.placeholder,{accept:this.model.ui.dndType,dropZone:this.dropZone})),this.own(E.after(this.dropZone,"onDndStart",v.hitch(this,"__onDndStart"),!0),E.after(this.dropZone,"onDndCancel",v.hitch(this,"__onDndEnd")),m(this.domNode,"mouseover",v.hitch(this,"__onDndOver")),m(this.domNode,"mouseout",v.hitch(this,"_hideOver"))),f.forEach(this.model.gems,function(e){var t=this.createGemUI(e,e.sourceNode);this.dropZoneNode.appendChild(t.domNode),this.add(t)},this),this.dropZone.sync(),this.inherited(arguments)},__onDndStart:function(e){this.dropZone.__isDraggingAndEnabled()?e===this.dropZone&&this._showOver():this._showDiminish()},__onDndOver:function(){this.dropZone.__isDraggingAndEnabled()&&this._showOver()},__onDndEnd:function(){this._hideDiminish(),this._hideOver()},_showOver:function(){this.domNode&&D.add(this.domNode,"over")},_hideOver:function(){this.domNode&&D.remove(this.domNode,"over")},_showDiminish:function(){this.domNode&&D.add(this.domNode,"dimished")},_hideDiminish:function(){this.domNode&&D.remove(this.domNode,"dimished")},add:function(e){e.model.gemBar=this.model,e.gemBar=this,this.gems.push(e),this.propPanel.setupEventHandling(e),this.propPanel.registerGemUI(e),this.model.required&&D.remove(this.placeholder,"reqiured")},insertAt:function(e,t,i){var o=f.indexOf(this.gems,e);o>-1&&this.gems.splice(o,1),this.gems.splice(t,0,e),this.propPanel.registerGemUI(e),this.model.insertAt(e.model,t,o,i),this.model.allowMultiple||(this.placeholder.style.display="none"),this.model.required&&D.remove(this.placeholder,"reqiured")},remove:function(e,t){this.dropZoneNode.removeChild(e.domNode);var i=f.indexOf(this.gems,e);this.gems.splice(i,1),this.model.remove(e.model,t),(this.model.allowMultiple||0===this.model.gems.length)&&(this.placeholder.style.display=""),this.propPanel.unregisterGemUI(e),this.propPanel.resize()},onContextMenu:function(e,t){},checkAcceptance:function(e,t,i,o){return this.model.allowMultiple||0===this.model.gems.length},validateGem:function(e){return!0},createGemFromNode:function(e){var t={id:e.innerHTML};return new H.registeredTypes.gem(t)},createGemUI:function(e,t){var i=j.registeredTypes.gem,o={model:e,postDrop:e.postDrop,dndType:e.dndType,gemBar:this,sourceNode:t};return i.create?i.create(o):new i(o)},destroyRecursive:function(){this.inherited(arguments),f.forEach(this.gems,function(e){e._destroyed||e.destroyRecursive()})},destroy:function(){this.dropZone&&(this.dropZone.destroy(),this.dropZone=null),this._placeHolderSource&&(this._placeHolderSource.destroy(),this._placeHolderSource=null),this.inherited(arguments),this.dropZoneNode=this.placeholder=this._startupWidgets=this._supportingWidgets=null}});j.registeredTypes.gemBar=O;var S=e([o,n,x,A],{className:"gem",templateString:"<div id='${id}' class='${className} dojoDndItem' dndType='${dndType}'><div class='gem-label' title='${model.value}'></div><div class='gemMenuHandle'></div></div>",constructor:function(e){e.id=k("gem_"+this.model.id+"_"),this.gemBar=e.gemBar,this.dndType=e.dndType},detach:function(){model.detach()},destroy:function(){this.inherited(arguments),this.menuHandle=this.postDrop=this.gemBar=this._startupWidgets=this._supportingWidgets=null},postCreate:function(){this.menuHandle=g("div.gemMenuHandle",this.domNode)[0],this.menuHandle||(this.menuHandle=g(".gemMenuHandle",this.domNode)[0]);var e=g("div.gem-label",this.domNode)[0];e||(e=g(".gem-label",this.domNode)[0]),e.innerHTML=this.model.value,this.own(m(this.domNode,"contextmenu",v.hitch(this,"onContextMenu")),m(this.menuHandle,"mouseover",function(e){C.manager().source||D.add(e.target,"over")}),m(this.menuHandle,"mouseout",function(e){C.manager().source||D.remove(e.target,"over")}),m(this.menuHandle,"click",v.hitch(this,"onContextMenu")),m(this.domNode,"mouseover",v.hitch(this,"onMouseOver")),m(this.domNode,"mouseout",v.hitch(this,"onMouseOut"))),this.inherited(arguments)},onMouseOver:function(){C.manager().source||D.add(this.domNode,"over")},onMouseOut:function(){D.remove(this.domNode,"over")},onContextMenu:function(e){}});j.registeredTypes.gem=S;var Z=e([o,n,s,A,x],{className:"propPanel_combobox propPanel_control",options:null,templateString:"<div class='${className}' id='${id}'></div>",constructor:function(e){this.name=this.model.id,e.id=k(this.name),this.options=[],f.forEach(this.model.values,function(e,t){var i={label:e,value:e};if(this.model.ui.labels){var o=this.model.ui.labels[t];i.label=G.getString(o,o)}this.options.push(i)},this),null==this.model.value&&this.model.set("value",this.model.values[0]),this.value=this.model.value},postCreate:function(){var e=this,t=this.options;if(f.forEach(t,function(i,o){void 0===e.value?t.selected=!0:e.value==i.value&&(i.selected=!0)},this),this.isMobile()){var i=this.id+"_select",o=I.create("select",{id:i});f.forEach(t,function(e,t){var i;i=void 0!==e.selected&&1==e.selected?{label:e.label,value:e.value,selected:!0}:{label:e.label,value:e.value},I.create("option",i,o)},this),this.domNode.appendChild(o),this.own(m(o,"onchange",function(){e.model.set("value",this.value),e.value=this.value}))}else{D.add(this.domNode,this.className);(this.selNode=new c({options:t,onChange:function(){e.model.set("value",this.value),e.value=this.value}})).placeAt(this.domNode)}this.inherited(arguments)},isMobile:function(){return this.isMobileSafari()||void 0!==window.orientation},isMobileSafari:function(){return null!=navigator.userAgent.match(/(iPad|iPod|iPhone)/)},destroy:function(){this.inherited(arguments),this.selNode&&(this.selNode.destroyRecursive(),this.selNode=null),this._startupWidgets=null,this._supportingWidgets=null}});j.registeredTypes.combo=Z;var $=e([h,A,x],{className:"propPanel_slider propPanel_control",minimum:0,maximum:100,style:"width: 100%",intermediateChanges:!0,discreteValues:!0,constructor:function(e){e.id=k(this.model.id+"_slider"),this.value=this.model.value,this.model.minimum&&(this.minimum=this.model.minimum),this.model.maximum&&(this.maximum=this.model.maximum),this.discreteValues=this.maximum-this.minimum+1},onChange:function(){this.model.set("value",this.value)}});j.registeredTypes.slider=$;var z=e([a,A,x],{className:"propPanel_control",constructor:function(e){this.disabled=this.model.disabled,this.value=this.model.value,e.id=null,this.inherited(arguments)},onChange:function(){this.model.set("value",this.value)}});j.registeredTypes.textbox=z;var W=e([o,n,s,A,x],{className:"propPanel_checkbox propPanel_control",value:!1,templateString:"<div class='${className}'><label for='${checkBoxId}'>${label}</label></div>",constructor:function(e){e.id=null,this.checkBoxId=k(this.model.id+"_checkbox"),null!=this.model.value?this.value=this.model.value:this.model.set("value",this.value),this.label=G.getString(this.model.ui.label,this.model.ui.label)},postCreate:function(){var e=this.checkBoxId;this.checkbox=new u({id:e,name:e,checked:this.model.get("value"),onChange:v.hitch(this,function(e){this.model.set("value",e)})},e),this.checkbox.placeAt(this.domNode,"first")},destroy:function(){this.inherited(arguments),this.checkbox&&(this.checkbox.destroyRecursive(),this.checkbox=null),this._startupWidgets=this._supportingWidgets=null}});j.registeredTypes.checkbox=W;var F=e([o,n,s,A,x],{templateString:"<div class='button-wrapper'><button id='${buttonId}' name='${buttonId}' data-dojo-type='dijit.form.Button' type='button' >${label}</button></div>",constructor:function(e){this.buttonId=k(this.model.id+"_button"),this.disabled=this.model.disabled,e.id=null;var t=this.model.ui.label;this.label=G.getString(t,t),this.inherited(arguments)},postCreate:function(){var e=i.byId(this.buttonId);this.own(m(e,"click",v.hitch(this,"onClick")))},onClick:function(){this.model.set("clicked",!0)},destroy:function(){this.inherited(arguments),this._startupWidgets=this._supportingWidgets=null}});return j.registeredTypes.button=F,j});