define(["dojo/_base/kernel","dojo/_base/config","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/dom-class","dijit/registry","./scrollable"],function(e,i,o,t,d,s,r,a,l){return o("dojox.mobile._ScrollableMixin",l,{fixedHeader:"",fixedFooter:"",_fixedAppFooter:"",scrollableParams:null,allowNestedScrolls:!0,appBars:!0,constructor:function(){this.scrollableParams={}},destroy:function(){this.cleanup(),this.inherited(arguments)},startup:function(){if(!this._started){this._fixedAppFooter&&(this._fixedAppFooter=s.byId(this._fixedAppFooter)),this.findAppBars();var e,o=this.scrollableParams;if(this.fixedHeader&&(e=s.byId(this.fixedHeader),e.parentNode==this.domNode&&(this.isLocalHeader=!0),o.fixedHeaderHeight=e.offsetHeight),this.fixedFooter&&(e=s.byId(this.fixedFooter),e.parentNode==this.domNode&&(this.isLocalFooter=!0,e.style.bottom="0px"),o.fixedFooterHeight=e.offsetHeight),this.scrollType=this.scrollType||i.mblScrollableScrollType||0,this.init(o),this.allowNestedScrolls)for(var t=this.getParent();t;t=t.getParent())if(t&&t.scrollableParams){this.dirLock=!0,t.dirLock=!0;break}this._resizeHandle=this.subscribe("/dojox/mobile/afterResizeAll",function(){if("none"!==this.domNode.style.display){var e=d.doc.activeElement;this.isFormElement(e)&&s.isDescendant(e,this.containerNode)&&this.scrollIntoView(e)}}),this.inherited(arguments)}},findAppBars:function(){if(this.appBars){var e,i,o;for(e=0,i=d.body().childNodes.length;e<i;e++)o=d.body().childNodes[e],this.checkFixedBar(o,!1);if(this.domNode.parentNode)for(e=0,i=this.domNode.parentNode.childNodes.length;e<i;e++)o=this.domNode.parentNode.childNodes[e],this.checkFixedBar(o,!1);this.fixedFooterHeight=this.fixedFooter?this.fixedFooter.offsetHeight:0}},checkFixedBar:function(e,i){if(1===e.nodeType){var o=e.getAttribute("fixed")||e.getAttribute("data-mobile-fixed")||a.byNode(e)&&a.byNode(e).fixed;if("top"===o)return r.add(e,"mblFixedHeaderBar"),i&&(e.style.top="0px",this.fixedHeader=e),o;if("bottom"===o)return r.add(e,"mblFixedBottomBar"),i?this.fixedFooter=e:this._fixedAppFooter=e,o}return null}})});