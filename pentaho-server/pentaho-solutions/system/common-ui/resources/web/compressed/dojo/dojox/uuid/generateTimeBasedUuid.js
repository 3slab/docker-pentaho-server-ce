define(["dojo/_base/lang","./_base"],function(e){return dojox.uuid.generateTimeBasedUuid=function(e){return dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(e)},dojox.uuid.generateTimeBasedUuid.isValidNode=function(r){var i=parseInt(r,16);return e.isString(r)&&12==r.length&&isFinite(i)},dojox.uuid.generateTimeBasedUuid.setNode=function(e){dojox.uuid.assert(null===e||this.isValidNode(e)),this._uniformNode=e},dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode},dojox.uuid.generateTimeBasedUuid._generator=new function(){function r(e){e[2]+=e[3]>>>16,e[3]&=65535,e[1]+=e[2]>>>16,e[2]&=65535,e[0]+=e[1]>>>16,e[1]&=65535,dojox.uuid.assert(e[0]>>>16==0)}function i(e){var r=new Array(0,0,0,0);return r[3]=e%65536,e-=r[3],e/=65536,r[2]=e%65536,e-=r[2],e/=65536,r[1]=e%65536,e-=r[1],e/=65536,r[0]=e,r}function o(i,o){dojox.uuid.assert(e.isArray(i)),dojox.uuid.assert(e.isArray(o)),dojox.uuid.assert(4==i.length),dojox.uuid.assert(4==o.length);var t=new Array(0,0,0,0);return t[3]=i[3]+o[3],t[2]=i[2]+o[2],t[1]=i[1]+o[1],t[0]=i[0]+o[0],r(t),t}function t(i,o){dojox.uuid.assert(e.isArray(i)),dojox.uuid.assert(e.isArray(o)),dojox.uuid.assert(4==i.length),dojox.uuid.assert(4==o.length);var t=!1;i[0]*o[0]!=0&&(t=!0),i[0]*o[1]!=0&&(t=!0),i[0]*o[2]!=0&&(t=!0),i[1]*o[0]!=0&&(t=!0),i[1]*o[1]!=0&&(t=!0),i[2]*o[0]!=0&&(t=!0),dojox.uuid.assert(!t);var u=new Array(0,0,0,0);return u[0]+=i[0]*o[3],r(u),u[0]+=i[1]*o[2],r(u),u[0]+=i[2]*o[1],r(u),u[0]+=i[3]*o[0],r(u),u[1]+=i[1]*o[3],r(u),u[1]+=i[2]*o[2],r(u),u[1]+=i[3]*o[1],r(u),u[2]+=i[2]*o[3],r(u),u[2]+=i[3]*o[2],r(u),u[3]+=i[3]*o[3],r(u),u}function u(e,r){for(;e.length<r;)e="0"+e;return e}function n(){for(var e=Math.floor(Math.random()%1*Math.pow(2,32)),r=e.toString(j);r.length<8;)r="0"+r;return r}this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var a=null,d=null,s=null,f=0,g=null,l=null,j=16;this.generateUuidString=function(e){if(e)dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(e));else if(dojox.uuid.generateTimeBasedUuid._uniformNode)e=dojox.uuid.generateTimeBasedUuid._uniformNode;else{if(!a){var x=Math.floor(Math.random()%1*Math.pow(2,15)),h=(32768|x).toString(j);a=h+n()}e=a}if(!d){var v=Math.floor(Math.random()%1*Math.pow(2,14));d=(32768|v).toString(j)}var m=new Date,_=m.valueOf(),N=i(_);if(!g){var U=i(3600),S=i(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS),c=t(S,U),T=i(1e3);g=t(c,T),l=i(1e4)}var A=N,B=o(g,A),w=t(B,l);if(m.valueOf()==s){if(w[3]+=f,r(w),1e4==(f+=1))for(;m.valueOf()==s;)m=new Date}else s=m.valueOf(),f=1;var O=w[2].toString(j),M=w[3].toString(j),y=u(O,4)+u(M,4),E=w[1].toString(j);E=u(E,4);var G=w[0].toString(j);G=u(G,3);var R=y+"-"+E+"-1"+G+"-"+d+"-"+e;return R=R.toLowerCase()}},dojox.uuid.generateTimeBasedUuid});