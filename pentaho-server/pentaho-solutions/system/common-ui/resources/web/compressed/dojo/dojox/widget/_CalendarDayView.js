define(["dojo/_base/declare","./_CalendarView","dijit/_TemplatedMixin","dojo/query","dojo/dom-class","dojo/_base/event","dojo/date","dojo/date/locale","dojo/text!./Calendar/CalendarDay.html","dojo/cldr/supplemental","dojo/NodeList-dom"],function(t,e,a,i,d,n,s,o,l,r){return t("dojox.widget._CalendarDayView",[e,a],{templateString:l,datePart:"month",dayWidth:"narrow",postCreate:function(){this.cloneClass(".dijitCalendarDayLabelTemplate",6),this.cloneClass(".dijitCalendarDateTemplate",6),this.cloneClass(".dijitCalendarWeekTemplate",5);var t=o.getNames("days",this.dayWidth,"standAlone",this.getLang()),e=r.getFirstDayOfWeek(this.getLang());i(".dijitCalendarDayLabel",this.domNode).forEach(function(a,i){this._setText(a,t[(i+e)%7])},this)},onDisplay:function(){this._addedFx||(this._addedFx=!0,this.addFx(".dijitCalendarDateTemplate div",this.domNode))},_onDayClick:function(t){if(void 0!==t.target._date){var e=new Date(this.get("displayMonth")),a=t.target.parentNode,i="dijitCalendar",o=d.contains(a,i+"PreviousMonth")?-1:d.contains(a,i+"NextMonth")?1:0;if(o&&(e=s.add(e,"month",o)),e.setDate(t.target._date),this.isDisabledDate(e))return void n.stop(t);this.parent._onDateSelected(e)}},_setValueAttr:function(t){this._populateDays()},_populateDays:function(){var t=new Date(this.get("displayMonth"));t.setDate(1);var e=t.getDay(),a=s.getDaysInMonth(t),d=s.getDaysInMonth(s.add(t,"month",-1)),n=new Date,l=this.get("value"),h=r.getFirstDayOfWeek(this.getLang());h>e&&(h-=7);var D=s.compare,g="dijitCalendarSelectedDate",m=this._lastDate,u=null==m||m.getMonth()!=t.getMonth()||m.getFullYear()!=t.getFullYear();if(this._lastDate=t,!u)return void i(".dijitCalendarDateTemplate",this.domNode).removeClass(g).filter(function(t){return t.className.indexOf("dijitCalendarCurrent")>-1&&t._date==l.getDate()}).addClass(g);i(".dijitCalendarDateTemplate",this.domNode).forEach(function(o,r){r+=h;var m,u=new Date(t),C="dijitCalendar",j=0;r<e?(m=d-e+r+1,j=-1,C+="Previous"):r>=e+a?(m=r-e-a+1,j=1,C+="Next"):(m=r-e+1,C+="Current"),j&&(u=s.add(u,"month",j)),u.setDate(m),D(u,n,"date")||(C="dijitCalendarCurrentDate "+C),D(u,l,"date")||D(u,l,"month")||D(u,l,"year")||(C=g+" "+C),this.isDisabledDate(u,this.getLang())&&(C=" dijitCalendarDisabledDate "+C);var c=this.getClassForDate(u,this.getLang());c&&(C=c+" "+C),o.className=C+"Month dijitCalendarDateTemplate",o.dijitDateValue=u.valueOf();var p=i(".dijitCalendarDateLabel",o)[0];this._setText(p,u.getDate()),p._date=p.parentNode._date=u.getDate()},this);var C=o.getNames("months","wide","standAlone",this.getLang());this._setText(this.monthLabelNode,C[t.getMonth()]),this._setText(this.yearLabelNode,t.getFullYear())}})});