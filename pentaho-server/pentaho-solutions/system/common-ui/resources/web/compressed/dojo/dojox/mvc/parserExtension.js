define(["require","dojo/_base/kernel","dojo/_base/lang","dojo/has!dojo-parser?:dojo/_base/window","dojo/has","dojo/has!dojo-mobile-parser?:dojo/parser","dojo/has!dojo-parser?:dojox/mobile/parser","dojox/mvc/_atBindingMixin","dojox/mvc/Element"],function(e,o,t,r,a,d,s,n){a.add("dom-qsa",!!document.createElement("div").querySelectorAll);try{a.add("dojo-parser",!!e("dojo/parser"))}catch(e){}try{a.add("dojo-mobile-parser",!!e("dojox/mobile/parser"))}catch(e){}if(a("dojo-parser")){var p=d.scan;d.scan=function(e,r){return p.apply(this,t._toArray(arguments)).then(function(t){for(var d=(r.scope||o._scopeName)+"Type",s="data-"+(r.scope||o._scopeName)+"-",p=s+"type",i=a("dom-qsa")?e.querySelectorAll("["+n.prototype.dataBindAttr+"]"):e.getElementsByTagName("*"),c=0,l=i.length;c<l;c++){var m=i[c];m.getAttribute(p)||m.getAttribute(d)||!m.getAttribute(n.prototype.dataBindAttr)||t.push({types:["dojox/mvc/Element"],node:m})}return t})}}if(a("dojo-mobile-parser")){var i=s.parse;s.parse=function(e,d){var s=((d||{}).scope||o._scopeName)+"Type",p="data-"+((d||{}).scope||o._scopeName)+"-",c=p+"type";nodes=a("dom-qsa")?(e||r.body()).querySelectorAll("["+n.prototype.dataBindAttr+"]"):(e||r.body()).getElementsByTagName("*");for(var l=0,m=nodes.length;l<m;l++){var j=nodes[l];j.getAttribute(c)||j.getAttribute(s)||!j.getAttribute(n.prototype.dataBindAttr)||j.setAttribute(c,"dojox/mvc/Element")}return i.apply(this,t._toArray(arguments))}}return d||s});