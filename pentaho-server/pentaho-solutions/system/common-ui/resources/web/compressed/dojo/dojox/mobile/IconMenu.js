define(["dojo/_base/declare","dojo/sniff","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/dom-attr","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","dojo/has!dojo-bidi?dojox/mobile/bidi/IconMenu","./IconMenuItem"],function(o,e,i,t,s,d,n,h,l,r){var a=o(e("dojo-bidi")?"dojox.mobile.NonBidiIconMenu":"dojox.mobile.IconMenu",[l,h,n],{transition:"slide",iconBase:"",iconPos:"",cols:3,tag:"ul",selectOne:!1,baseClass:"mblIconMenu",childItemClass:"mblIconMenuItem",_createTerminator:!1,buildRendering:function(){if(this.domNode=this.containerNode=this.srcNodeRef||t.create(this.tag),d.set(this.domNode,"role","menu"),this.inherited(arguments),this._createTerminator){var o=this._terminator=t.create("br");o.className=this.childItemClass+"Terminator",this.domNode.appendChild(o)}},startup:function(){this._started||(this.refresh(),this.inherited(arguments))},refresh:function(){var o=this.getParent();o&&i.remove(o.domNode,"mblSimpleDialogDecoration");var t=this.getChildren();if(this.cols){var d=Math.ceil(t.length/this.cols),n=Math.floor(100/this.cols),h=100-n*this.cols,l=Math.floor(100/d),r=100-l*d;e("ie")&&(h--,r--)}for(var a=0;a<t.length;a++){var c=t[a];if(this.cols){var m=a%this.cols==0,u=(a+1)%this.cols==0,f=Math.floor(a/this.cols);s.set(c.domNode,{width:n+(u?h:0)+"%",height:l+(f+1===d?r:0)+"%"}),i.toggle(c.domNode,this.childItemClass+"FirstColumn",m),i.toggle(c.domNode,this.childItemClass+"LastColumn",u),i.toggle(c.domNode,this.childItemClass+"FirstRow",0===f),i.toggle(c.domNode,this.childItemClass+"LastRow",f+1===d)}}},addChild:function(o,e){this.inherited(arguments),this.refresh()},hide:function(){var o=this.getParent();o&&o.hide&&o.hide()}});return e("dojo-bidi")?o("dojox.mobile.IconMenu",[a,r]):a});