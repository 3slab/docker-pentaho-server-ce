dojo.provide("dojox.secure.fromJson"),dojox.secure.fromJson="undefined"!=typeof JSON?JSON.parse:function(){function e(e,r,n){return r?t[r]:String.fromCharCode(parseInt(n,16))}var r=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),n=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),t={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=new String(""),o=(Object,Array,Object.hasOwnProperty);return function(t,f){var i,l=t.match(r),s=l[0],c=!1;"{"===s?i={}:"["===s?i=[]:(i=[],c=!0);for(var h,u=[i],d=1-c,g=l.length;d<g;++d){s=l[d];var v;switch(s.charCodeAt(0)){default:v=u[0],v[h||v.length]=+s,h=void 0;break;case 34:if(s=s.substring(1,s.length-1),-1!==s.indexOf("\\")&&(s=s.replace(n,e)),v=u[0],!h){if(!(v instanceof Array)){h=s||a;break}h=v.length}v[h]=s,h=void 0;break;case 91:v=u[0],u.unshift(v[h||v.length]=[]),h=void 0;break;case 93:u.shift();break;case 102:v=u[0],v[h||v.length]=!1,h=void 0;break;case 110:v=u[0],v[h||v.length]=null,h=void 0;break;case 116:v=u[0],v[h||v.length]=!0,h=void 0;break;case 123:v=u[0],u.unshift(v[h||v.length]={}),h=void 0;break;case 125:u.shift()}}if(c){if(1!==u.length)throw new Error;i=i[0]}else if(u.length)throw new Error;if(f){var b=function(e,r){var n=e[r];if(n&&"object"==typeof n){var t=null;for(var a in n)if(o.call(n,a)&&n!==e){var i=b(n,a);void 0!==i?n[a]=i:(t||(t=[]),t.push(a))}if(t)for(var l=t.length;--l>=0;)delete n[t[l]]}return f.call(e,r,n)};i=b({"":i},"")}return i}}();