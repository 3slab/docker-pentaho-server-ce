define(["dojo","dijit","dojox","dijit/_editor/_Plugin","dijit/form/Button","dojo/_base/connect","dojo/_base/declare","dojo/i18n","dojo/i18n!dojox/editor/plugins/nls/Preview"],function(t,e,s,i){var n=t.declare("dojox.editor.plugins.Preview",i,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=t.i18n.getLocalization("dojox.editor.plugins","Preview"),this.button=new e.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:t.hitch(this,"_preview")})},setEditor:function(t){this.editor=t,this._initButton()},updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var t,e=this.editor.get("value"),s="\t\t<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>\n";if(this.stylesheets)for(t=0;t<this.stylesheets.length;t++)s+="\t\t<link rel='stylesheet' type='text/css' href='"+this.stylesheets[t]+"'>\n";this.styles&&(s+="\t\t<style>"+this.styles+"</style>\n"),e="<html>\n\t<head>\n"+s+"\t</head>\n\t<body>\n"+e+"\n\t</body>\n</html>";var i=window.open("javascript: ''",this._nlsResources.preview,"status=1,menubar=0,location=0,toolbar=0");i.document.open(),i.document.write(e),i.document.close()}catch(t){console.warn(t)}}});return t.subscribe(e._scopeName+".Editor.getPlugin",null,function(t){if(!t.plugin){"preview"===t.args.name.toLowerCase()&&(t.plugin=new n({styles:"styles"in t.args?t.args.styles:"",stylesheets:"stylesheets"in t.args?t.args.stylesheets:null}))}}),n});