define(["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/sniff","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/touch","dijit/_WidgetBase","dijit/form/_FormValueMixin"],function(t,e,i,s,o,a,h,r,n,d,l,c,m,u){return i("dojox.mobile.Slider",[m,u],{value:0,min:0,max:100,step:1,baseClass:"mblSlider",flip:!1,orientation:"auto",halo:"8pt",buildRendering:function(){if(!this.templateString){this.focusNode=this.domNode=r.create("div",{}),this.valueNode=r.create("input",this.srcNodeRef&&this.srcNodeRef.name?{type:"hidden",name:this.srcNodeRef.name}:{type:"hidden"},this.domNode,"last");var t=r.create("div",{style:{position:"relative",height:"100%",width:"100%"}},this.domNode,"last");this.progressBar=r.create("div",{style:{position:"absolute"},class:"mblSliderProgressBar"},t,"last"),this.touchBox=r.create("div",{style:{position:"absolute"},class:"mblSliderTouchBox"},t,"last"),this.handle=r.create("div",{style:{position:"absolute"},class:"mblSliderHandle"},t,"last")}this.inherited(arguments),void 0!==this.domNode.style.msTouchAction&&(this.domNode.style.msTouchAction="none")},_setValueAttr:function(t,e){t=Math.max(Math.min(t,this.max),this.min);this.value,this.min,this.max,this.min;if(this.valueNode.value=t,this.inherited(arguments),this._started){this.focusNode.setAttribute("aria-valuenow",t);var i=100*(t-this.min)/(this.max-this.min);this.orientation;!0===e?(h.add(this.handle,"mblSliderTransition"),h.add(this.progressBar,"mblSliderTransition")):(h.remove(this.handle,"mblSliderTransition"),h.remove(this.progressBar,"mblSliderTransition")),d.set(this.handle,this._attrs.handleLeft,(this._reversed?100-i:i)+"%"),d.set(this.progressBar,this._attrs.width,i+"%")}},postCreate:function(){function i(i){function h(t){u=m?t[this._attrs.pageX]:t.touches?t.touches[0][this._attrs.pageX]:t[this._attrs.clientX],f=u-g,f=Math.min(Math.max(f,0),x);var e=this.step?(this.max-this.min)/this.step:x;(e<=1||e==1/0)&&(e=x);var i=Math.round(f*e/x);v=(this.max-this.min)*i/e,v=this._reversed?this.max-v:this.min+v}function r(t){t.preventDefault(),s.hitch(this,h)(t),this.set("value",v,!1)}function l(e){e.preventDefault(),t.forEach(j,s.hitch(this,"disconnect")),j=[],this.set("value",this.value,!0)}i.preventDefault();var m="mousedown"==i.type,b=n.position(p,!1),_=a("ie")||a("trident")>6?1:d.get(o.body(),"zoom")||1;isNaN(_)&&(_=1);var y=a("ie")||a("trident")>6?1:d.get(p,"zoom")||1;isNaN(y)&&(y=1);var g=b[this._attrs.x]*y*_+n.docScroll()[this._attrs.x],x=b[this._attrs.w]*y*_;s.hitch(this,h)(i),i.target==this.touchBox&&this.set("value",v,!0),t.forEach(j,e.disconnect);var N=o.doc.documentElement,j=[this.connect(N,c.move,r),this.connect(N,c.release,l)]}function r(t){if(!(this.disabled||this.readOnly||t.altKey||t.ctrlKey||t.metaKey)){var e,i=this.step,s=1;switch(t.keyCode){case l.HOME:e=this.min;break;case l.END:e=this.max;break;case l.RIGHT_ARROW:s=-1;case l.LEFT_ARROW:e=this.value+s*(y&&b?i:-i);break;case l.DOWN_ARROW:s=-1;case l.UP_ARROW:e=this.value+s*(!y||b?i:-i);break;default:return}t.preventDefault(),this._setValueAttr(e,!1)}}function m(t){this.disabled||this.readOnly||t.altKey||t.ctrlKey||t.metaKey||this._setValueAttr(this.value,!0)}this.inherited(arguments);var u,f,v,p=this.domNode;"auto"==this.orientation&&(this.orientation=p.offsetHeight<=p.offsetWidth?"H":"V"),h.add(this.domNode,t.map(this.baseClass.split(" "),s.hitch(this,function(t){return t+this.orientation})));var b="V"!=this.orientation,_=!!b&&this.isLeftToRight(),y=!!this.flip;this._reversed=!(b&&(_&&!y||!_&&y)||!b&&y),this._attrs=b?{x:"x",w:"w",l:"l",r:"r",pageX:"pageX",clientX:"clientX",handleLeft:"left",left:this._reversed?"right":"left",width:"width"}:{x:"y",w:"h",l:"t",r:"b",pageX:"pageY",clientX:"clientY",handleLeft:"top",left:this._reversed?"bottom":"top",width:"height"},this.progressBar.style[this._attrs.left]="0px",this.connect(this.touchBox,c.press,i),this.connect(this.handle,c.press,i),this.connect(this.domNode,"onkeypress",r),this.connect(this.domNode,"onkeyup",m),this.startup(),this.set("value",this.value)}})});