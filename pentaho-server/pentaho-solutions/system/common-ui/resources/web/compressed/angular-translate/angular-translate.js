/*!
 * angular-translate - v2.1.0 - 2014-09-04
 * http://github.com/PascalPrecht/angular-translate
 * Copyright (c) 2014 ; Licensed MIT
 */

angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(t){var e=t.storageKey(),n=t.storage();n?n.get(e)?t.use(n.get(e)):angular.isString(t.preferredLanguage())?t.use(t.preferredLanguage()):n.set(e,t.use()):angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(t){var e,n,r,a,i,o,s,u,l,c,f,g,h,d,v,p={},$=[],m=t,y=[],L=!1,S="translate-cloak",b=!1,w=function(){var t=window.navigator;return(t.language||t.browserLanguage||t.systemLanguage||t.userLanguage||"").split("-").join("_")},k=function(t){for(var e=[],r=angular.lowercase(t),a=0,i=$.length;a<i;a++)e.push(angular.lowercase($[a]));if(e.indexOf(r)>-1)return t;if(n){var o;for(var s in n){var u=!1,l=n.hasOwnProperty(s)&&angular.lowercase(s)===angular.lowercase(t);if("*"===s.slice(-1)&&(u=s.slice(0,-1)===t.slice(0,s.length-1)),(l||u)&&(o=n[s],e.indexOf(angular.lowercase(o))>-1))return o}}var c=t.split("_");return c.length>1&&e.indexOf(angular.lowercase(c[0]))>-1?c[0]:t},I=function(t,e){if(!t&&!e)return p;if(t&&!e){if(angular.isString(t))return p[t]}else angular.isObject(p[t])||(p[t]={}),angular.extend(p[t],E(e));return this};this.translations=I,this.cloakClassName=function(t){return t?(S=t,this):S};var E=function(t,e,n,r){var a,i,o,s;e||(e=[]),n||(n={});for(a in t)t.hasOwnProperty(a)&&(s=t[a],angular.isObject(s)?E(s,e.concat(a),n,a):(i=e.length?e.join(".")+"."+a:a,e.length&&a===r&&(o=""+e.join("."),n[o]="@:"+i),n[i]=s));return n};this.addInterpolation=function(t){return y.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return c=t,this},this.useSanitizeValueStrategy=function(t){return L=t,this},this.preferredLanguage=function(t){return C(t),this};var C=function(t){return t&&(e=t),e};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(d=t,this):d},this.translationNotFoundIndicatorRight=function(t){return t?(v=t,this):v},this.fallbackLanguage=function(t){return x(t),this};var x=function(t){return t?(angular.isString(t)?(a=!0,r=[t]):angular.isArray(t)&&(a=!1,r=t),angular.isString(e)&&r.indexOf(e)<0&&r.push(e),this):a?r[0]:r};this.use=function(t){if(t){if(!p[t]&&!f)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return i=t,this}return i};var O=function(t){if(!t)return u?u+m:m;m=t};this.storageKey=O,this.useUrlLoader=function(t){return this.useLoader("$translateUrlLoader",{url:t})},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return f=t,h=e||{},this},this.useFileFormatAdapter=function(t){return g=t,this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return s=t,this},this.storagePrefix=function(t){return t?(u=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return l=t,this},this.usePostCompiling=function(t){return b=!!t,this},this.determinePreferredLanguage=function(t){var n=t&&angular.isFunction(t)?t():w();return e=$.length?k(n):n,this},this.registerAvailableLanguageKeys=function(t,e){return t?($=t,e&&(n=e),this):$},this.$get=["$log","$injector","$rootScope","$q",function(t,n,u,$){var w,j,P,T=n.get(c||"$translateDefaultInterpolation"),F=!1,A={},N={},V=function(t,n,a){if(angular.isArray(t)){return function(t){for(var e={},r=[],i=0,o=t.length;i<o;i++)r.push(function(t){var r=$.defer(),i=function(n){e[t]=n,r.resolve([t,n])};return V(t,n,a).then(i,i),r.promise}(t[i]));return $.all(r).then(function(){return e})}(t)}var o=$.defer();t&&(t=t.trim());var u=function(){var t=e?N[e]:N[i];if(j=0,s&&!t){var n=w.get(m);if(t=N[n],r&&r.length){var a=K(r,n);j=a>-1?a+=1:0,r.push(e)}}return t}();return u?u.then(function(){J(t,n,a).then(o.resolve,o.reject)},o.reject):J(t,n,a).then(o.resolve,o.reject),o.promise},K=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},R=function(t){return d&&(t=[d,t].join(" ")),v&&(t=[t,v].join(" ")),t},M=function(t){i=t,u.$emit("$translateChangeSuccess"),s&&w.set(V.storageKey(),i),T.setLocale(i),angular.forEach(A,function(t,e){A[e].setLocale(i)}),u.$emit("$translateChangeEnd")},_=function(t,e){if(!t)throw"No language key specified for loading.";var r=N[t];if(r&&(!e||null===r.isOk))return r;var a=$.defer();return r=N[t]=a.promise,r.isOk=null,u.$emit("$translateLoadingStart"),F=!0,n.get(f)(angular.extend(h,{key:t,fileFormatAdapter:g&&n.get(g)})).then(function(e){var n={};u.$emit("$translateLoadingSuccess"),angular.isArray(e)?angular.forEach(e,function(t){angular.extend(n,E(t))}):angular.extend(n,E(e)),F=!1,r.isOk=!0,a.resolve({key:t,table:n}),u.$emit("$translateLoadingEnd")},function(t){r.isOk=!1,u.$emit("$translateLoadingError"),a.reject(t),u.$emit("$translateLoadingEnd")}),r};if(s&&(w=n.get(s),!w.get||!w.set))throw new Error("Couldn't use storage '"+s+"', missing get() or set() method!");angular.isFunction(T.useSanitizeValueStrategy)&&T.useSanitizeValueStrategy(L),y.length&&angular.forEach(y,function(t){var r=n.get(t);r.setLocale(e||i),angular.isFunction(r.useSanitizeValueStrategy)&&r.useSanitizeValueStrategy(L),A[r.getInterpolationIdentifier()]=r});var z=function(t){var e=$.defer();return p.hasOwnProperty(t)?(e.resolve(p[t]),e.promise):(N[t].then(function(t){I(t.key,t.table),e.resolve(t.table)},e.reject),e.promise)},H=function(t,e,n,r){var a=$.defer();return z(t).then(function(o){o.hasOwnProperty(e)?(r.setLocale(t),a.resolve(r.interpolate(o[e],n)),r.setLocale(i)):a.reject()},a.reject),a.promise},q=function(t,e,n,r){var a,o=p[t];return o.hasOwnProperty(e)&&(r.setLocale(t),a=r.interpolate(o[e],n),r.setLocale(i)),a},D=function(t){if(l){var e=n.get(l)(t,i);return void 0!==e?e:t}return t},G=function(t,e,n,a){var i=$.defer();if(t<r.length){var o=r[t];H(o,e,n,a).then(function(t){i.resolve(t)},function(){var r=G(t+1,e,n,a);i.resolve(r)})}else i.resolve(D(e));return i.promise},U=function(t,e,n,a){var i;if(t<r.length){var o=r[t];i=q(o,e,n,a),i||(i=U(t+1,e,n,a))}return i},Y=function(t,e,n){return G(P>0?P:j,t,e,n)},B=function(t,e,n){return U(P>0?P:j,t,e,n)},J=function(t,e,n){var a=$.defer(),o=i?p[i]:p,s=n?A[n]:T;if(o&&o.hasOwnProperty(t)){var u=o[t];"@:"===u.substr(0,2)?V(u.substr(2),e,n).then(a.resolve,a.reject):a.resolve(s.interpolate(u,e))}else{var c;l&&!F&&(c=D(t)),i&&r&&r.length?Y(t,e,s).then(function(t){a.resolve(t)},function(t){a.reject(R(t))}):l&&!F&&c?a.resolve(c):a.reject(R(t))}return a.promise},Q=function(t,e,n){var a,o=i?p[i]:p,s=n?A[n]:T;if(o&&o.hasOwnProperty(t)){var u=o[t];a="@:"===u.substr(0,2)?Q(u.substr(2),e,n):s.interpolate(u,e)}else{var c;l&&!F&&(c=D(t)),i&&r&&r.length?(j=0,a=B(t,e,s)):a=l&&!F&&c?c:R(t)}return a};if(V.preferredLanguage=function(t){return t&&C(t),e},V.cloakClassName=function(){return S},V.fallbackLanguage=function(t){if(void 0!==t&&null!==t){if(x(t),f&&r&&r.length)for(var e=0,n=r.length;e<n;e++)_(r[e]);V.use(V.use())}return a?r[0]:r},V.useFallbackLanguage=function(t){if(void 0!==t&&null!==t)if(t){var e=K(r,t);e>-1&&(P=e)}else P=0},V.proposedLanguage=function(){return o},V.storage=function(){return w},V.use=function(t){if(!t)return i;var e=$.defer();u.$emit("$translateChangeStart");var n=k(t);return n&&(t=n),!p[t]&&f?N[t]?(o=t,N[t].then(function(n){e.resolve(t),o===t&&(M(n.key),o=void 0)})):(o=t,_(t).then(function(n){I(n.key,n.table),e.resolve(n.key),o===t&&(M(n.key),o=void 0)},function(t){o=void 0,u.$emit("$translateChangeError"),e.reject(t),u.$emit("$translateChangeEnd")})):(e.resolve(t),M(t)),e.promise},V.storageKey=function(){return O()},V.isPostCompilingEnabled=function(){return b},V.refresh=function(t){function e(){a.resolve(),u.$emit("$translateRefreshEnd")}function n(){a.reject(),u.$emit("$translateRefreshEnd")}if(!f)throw new Error("Couldn't refresh translation table, no loader registered!");var a=$.defer();if(u.$emit("$translateRefreshStart"),t)p[t]?_(t,!0).then(function(n){I(n.key,n.table),t===i&&M(i),e()},n):n();else{var o=[];if(r&&r.length)for(var s=0,l=r.length;s<l;s++)i!==N[r]&&o.push(_(r[s],!0));i&&o.push(_(i,!0)),$.all(o).then(function(t){angular.forEach(t,function(t){p[t.key]&&delete p[t.key],I(t.key,t.table)}),i&&M(i),e()})}return a.promise},V.instant=function(t,n,a){if(null===t||angular.isUndefined(t))return t;if(angular.isArray(t)){for(var o={},s=0,u=t.length;s<u;s++)o[t[s]]=V.instant(t[s],n,a);return o}if(angular.isString(t)&&t.length<1)return t;t&&(t=t.trim());var c,f=[];e&&f.push(e),i&&f.push(i),r&&r.length&&(f=f.concat(r));for(var g=0,h=f.length;g<h;g++){var d=f[g];if(p[d]&&void 0!==p[d][t]&&(c=Q(t,n,a)),void 0!==c)break}return c||""===c||(c=t,l&&!F&&(c=D(t))),c},f&&(angular.equals(p,{})&&V.use(V.use()),r&&r.length))for(var W=function(t){I(t.key,t.table)},X=0,Z=r.length;X<Z;X++)_(r[X]).then(W);return V}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(t){var e,n={},r=null,a={escaped:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=angular.element("<div></div>").text(t[n]).html());return e}},i=function(t){return angular.isFunction(a[r])?a[r](t):t};return n.setLocale=function(t){e=t},n.getInterpolationIdentifier=function(){return"default"},n.useSanitizeValueStrategy=function(t){return r=t,this},n.interpolate=function(e,n){return r&&(n=i(n)),t(e)(n||{})},n}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(t,e,n,r,a,i){return{restrict:"AE",scope:!0,compile:function(e,o){var s=o.translateValues?o.translateValues:void 0,u=o.translateInterpolation?o.translateInterpolation:void 0,l=e[0].outerHTML.match(/translate-value-+/i),c="^(.*)("+n.startSymbol()+".*"+n.endSymbol()+")(.*)";return function(e,f,g){if(e.interpolateParams={},e.preText="",e.postText="",g.$observe("translate",function(t){if(angular.equals(t,"")||!angular.isDefined(t)){var r=f.text().match(c);angular.isArray(r)?(e.preText=r[1],e.postText=r[3],e.translationId=n(r[2])(e.$parent)):e.translationId=f.text().replace(/^\s+|\s+$/g,"")}else e.translationId=t}),g.$observe("translateDefault",function(t){e.defaultText=t}),s&&g.$observe("translateValues",function(t){t&&e.$parent.$watch(function(){angular.extend(e.interpolateParams,a(t)(e.$parent))})}),l){for(var h in g)g.hasOwnProperty(h)&&"translateValue"===h.substr(0,14)&&"translateValues"!==h&&function(t){g.$observe(t,function(n){e.interpolateParams[angular.lowercase(t.substr(14,1))+t.substr(15)]=n})}(h)}var d=function(e,n,a){a||void 0===n.defaultText||(e=n.defaultText),f.html(n.preText+e+n.postText);var i=t.isPostCompilingEnabled(),s=void 0!==o.translateCompile,u=s&&"false"!==o.translateCompile;(i&&!s||u)&&r(f.contents())(n)},v=function(){return s||l?function(){var n=function(){e.translationId&&e.interpolateParams&&t(e.translationId,e.interpolateParams,u).then(function(t){d(t,e,!0)},function(t){d(t,e,!1)})};e.$watch("interpolateParams",n,!0),e.$watch("translationId",n)}:function(){var n=e.$watch("translationId",function(r){e.translationId&&r&&t(r,{},u).then(function(t){d(t,e,!0),n()},function(t){d(t,e,!1),n()})},!0)}}(),p=i.$on("$translateChangeSuccess",v);v(),e.$on("$destroy",p)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(t,e){return{compile:function(n){var r=t.$on("$translateChangeEnd",function(){n.removeClass(e.cloakClassName()),r(),r=null});n.addClass(e.cloakClassName())}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(t,e){return function(n,r,a){return angular.isObject(r)||(r=t(r)(this)),e.instant(n,r,a)}}]);